// ------------------------------------------------------------------------------
//  <autogenerated>
//      This code was generated by a tool.
//      Mono Runtime Version: 4.0.30319.1
// 
//      Changes to this file may cause incorrect behavior and will be lost if 
//      the code is regenerated.
//  </autogenerated>
// ------------------------------------------------------------------------------
using System;
using System.IO;
using UnityEngine;
using ProtoBuf;

namespace Utility
{

    /// <summary>
    /// Protobuf serializer. For convert
    /// </summary>
	public class ProtobufSerializer
	{

		public static byte[] SerializeToBytes<T> (T instance){
			using (MemoryStream ms = new MemoryStream ())
			{
				if (instance == null){
                    Debug.Log("try to serialize null instance, errorcode: " + ErrorCode.IllegalParam);
					return null;
				}
				Serializer.Serialize<T>(ms, instance);
				return Converter.StreamToBytes(ms);
			}
		}

		public static T ParseFormString<T> (String source){
			MemoryStream ms = Converter.StringToStream(source);
			return Serializer.Deserialize<T>(ms);
		}
	}
}


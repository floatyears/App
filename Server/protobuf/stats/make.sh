OUT_FILE=./stats_all.proto
rm -f $OUT_FILE
echo 'package stats;' > $OUT_FILE
cat ../*.proto|grep -v "^import.*"|sed 's/^package.*/\/\/=====================================================/g' >> $OUT_FILE
cat ./stats.proto >> $OUT_FILE
ls -lrt

stat_path="../../src/stats"
protoc --go_out=$stat_path stats_all.proto

cd ../client_proto/
protoc --go_out=../../src/bbproto skill.proto bbproto.proto
cd -

#cp files to stats dir
cp $stat_path/stats_all.pb.go ../../../../bbmstats/src/stats/
cp ./stats.proto ../../../../bbmstats/src/stats/

ls -lrt ../../../bbsvr/src/stats/stats_all.pb.go


#trim unsed code of bbproto
cd /Users/kory/Documents/Dev/server/bbmsvr/bbsvr/src/stats/
sed -n '/Code generated by protoc-gen-go./,/var _ = math.Inf/p' stats_all.pb.go > tmp.go
echo '' >> tmp.go
echo 'import . "bbproto"' >> tmp.go
echo '' >> tmp.go
sed -n '/type StatAuthUser struct {/,//p' stats_all.pb.go >> tmp.go
mv tmp.go stats_all.pb.go
cd -

